\chapter{Inledning}

Drönare är ett obemannat luftfordon som kan styras med hjälp av vision baserad-, tröghets- eller satellitnavigation \citep{geospatial}. För att robotar eller drönaren skulle kunna navigera autonomiskt måste den vara medveten om sitt läge, hastighet, kursriktning samt start- och slutplats. Andra faktorer som borde beaktas för att flyga från start till slutplatsen är hur drönaren kan behandla data från inbyggda sensorer i sig, det vill säga kartlägga miljön och egen position i denna miljö samt hur man planerar vägen utan att kollidera med hinder. Mest lovande forskning är inom vision baserad navigering med hjälp av datorseende.

Redan för många årtionde har robot navigering med datorseende varit i stort popularitet i det vetenskapliga samfundet \citep{982903}. För att robotar skulle vara verkligen autonomiska måste de kunna samtidig kartlägga och lokalisera sig själv, detta kallas för SLAM (Simultaneous Localization and Mapping) \citep{realslamproblem}. SLAM är ett problem som har fått uppmärksamhet av det vetenskapliga samfundet sedan 80-talet och har sätts som ett rön om det löses. Teoretiskt har SLAM problemet lösts och användnings fall av SLAM algoritmer finns i begränsade förhållande men för att en robot skulle kunna vara autonomisk måste dessa algoritmer fås och fungera i allmänhet, såsom i dynamiska och stora miljön.

För att drönaren är mer versatila än robotar som inte flyger så finns det mera användningsfall för dem. De kan övervaka markföroreningar, industriolyckor eller växternas behov av vatten och näring \citep{crowdsurveillance}. Drönaren har också använts vid katastrofområden, såsom vid Japans jordbävning för att mäta strålningsvärden i Fukushima och få visuell information om katastrofområdet samt räddning av invandrare vid medelhavet.

Avhandlingen kommer att vara en översikt om SLAM, med fokus på vision baserad SLAM som använder datorseende (VSLAM, Visual SLAM). Frågor som provas få svar på är: Vad är de fundamentala problem med SLAM? Vilka SLAM metoder skulle kunna användas eller har använts med drönaren och vad begränsar användningen av dessa? Varför har VSLAM fått så mycket uppmärksamhet än de traditionella metoderna?

Avhandlingen kommer att fokusera på vilka metoder det finns för att kartlägga miljön och lokalisera sig själv med hjälp av datorseende, som refereras också som samtidig lokalisering och kartläggning med datorseende (VSLAM, Visual SLAM). Några frågor som provas att svara på är varför används vision baserad navigation istället för andra metoder? Vad är för och nackdelar med vision baserad navigation när det kommer till drönaren?

Avhandlingens struktur är följande efter introduktionen. I kapitel 2 öppnas bakgrund bakom navigering, kartläggning, lokalisering och bildbearbetning som är nödvändiga för SLAM, kapitel 3 innehåller information om samtidig lokalisering och kartläggning och hur SLAM kan grupperas i olika kategorier änligt startinformation som man har.

\chapter{Bakgrund}

\section{Navigation}

Navigation eller navigering för drönaren är en metod där drönaren planerar och utför en rutt från startplats till målet \citep{geospatial}. För att kunna navigera till målet måste den vara medveten om sitt läge, miljö, kursriktning och hastighet. Autonomisk navigering för drönaren kräver att drönaren kan undvika hinder, planera sin rutt samt ta omvägar vid behov. Med traditionella navigeringsmetoder såsom satellit, som använder GPS (Global Positioning System), och tröghetsnavigering (INS, Inerital Navigation System), som använder accelerometer och gyroskop, kan man inte få visuell information om omgivningen. Laser eller ultraljud kan användas för att navigera med drönaren, men för att drönaren byggs mindre än förr och de har begränsad kapacitet med batteri så har dessa sensorer uteslutnas \citep{6385934}. Med hjälp av vision baserad navigering, som använder kameror, kan man få rikligt med information om omgivningen. 

\subsection{Vision baserad navigation}

I vision baserad navigering används visuella sensorer för att få bilder som indata som sedan kan behandlas med algoritmer för att få en representation av miljön och lokalisera drönaren \citep{geospatial}. Visuella sensorer som används är monokulära, stereo, RGB-D och fisheye kameror samt kombinationer av dessa. Med kamerasensorer kan man uppfatta färg, textur och former. Kameror är billiga att operera och de kan inte bli störda av utomstående signaler eller upptäckas av utomstående entitet för att de är passiva. Vision baserad navigering är för tillfället det mest lovande forskningsområde när det kommer till navigering av drönaren.

\section{Kartläggning}

En karta om miljön kan representeras i två (2D) eller tre (3D) dimensioner \citep{geospatial}. Med en monokulär kamera går det inte att bygga en 3D karta av omgivningen, för detta behövs en stereokamera som är ett par av monokulära kameror. Kartor kan sparas i olika format, såsom datorstödd konstruktion (CAD, Computer-Aided Design), rutnät beläggning (Occupancy Grid) eller topologisk karta \citep{982903}. Kartan kan vara färdigt sparad för drönaren eller så kan man kartlägga miljön från bilderna av sensorerna då drönaren flyger \citep{geospatial}. Med 3D volymetriska sensorer kan man konstruera en 3D modell och spara denna information i en Octree struktur. Med strukturen kan data om miljön packas i mindre format utan att tappa möjligheten att uppdatera informationen vid behov. En annan metod som tas upp är med stereovision sensorer göra en djuphetskarta och behandla data till plana ytor som minskar på missvisning som uppstår med användning av stereovision algoritmer när man bygger upp djuphetskartan.

\section{Lokalisering}

Lokalisering för robotar betyder att den vet sin position i miljön \citep{982903}. Då man har en uppfattning om miljön, det vill säga en karta, så kan en drönare lokalisera sig själv med att ge den landmärken som den hittar då den navigerar. Från bilderna ur drönarens kameror identifieras landmärken, sedan matchas observerade landmärken med de som finns i kartan och efter det kan man beräkna positionen av roboten. Positionen av roboten kan beräknas också utan kartan med att beräkna distansen till landmärken och distansen mellan landmärken som extraheras av bilder \citep{realslamproblem}. För att veta sin position i miljön används sannolikhetsberäkning med hjälp av rekursiv Bayes, som menar att man räknar sannolikheten av robotens position när man vet dens riktning, hastighet och observerade landmärken för varje tidpunkt. Man kan dela lokalisering till global- och inkrementell eller lokal lokalisering \citep{982903, globalsubmaps}. Med global lokalisering har roboten ingen vetskap om sin position i början men med inkrementell lokalisering har roboten en ungefärlig eller exakt vetskap om sin plats vid början av navigeringen. 

\section{Bildbearbetning}

Bildbearbetning i vision baserad navigering menar att man gör utdrag ur bilder i form av former, kanter, linjer, djuphet, rörelse, färg eller mönster \citep{982903}. Man kan också utjämna bilder, som menar att man blurrar bilder för att få bort oskärpa, och segmentera områden baserat på nyanser av grått. För att få information ur bilder finns det olika algoritmer såsom SIFT, HARRIS, SURF, ORB, med mera \citep{8930783, slamproblem, mapbuildingsift}.

\chapter{Samtidig lokalisering och kartläggning}

Samtidig lokalisering och kartläggning (SLAM) är ett av de grundläggande problem i robot navigering \citep{realslamproblem}. SLAM är en process där en robot som har ingen tidigare information om sin plats eller omgivning kan samtidigt bygga ombord en karta och lokaliserar sig själv med hjälp av att identifiera landmärken. Detta kan uppnås med sannolikhetsberäkning baserat på tid där man tar i beaktande riktningen av roboten, distansen roboten rör på sig, landmärken som är invariant för rörelse och observationer som roboten gör vid varje tidpunkt. Några lösningar för SLAM som baserar sig på sannolikheträkning är Extended Kalman Filter (EKF-SLAM) och FastSLAM. 

SLAM processen har delproblem som borde lösas för att få robotar att navigera autonomiskt \citep{slamproblem}. De svåraste problemet i flesta av SLAM processer är data förenings problemet som menar att man identifierar två olika landmärken som en och samma. Detta problem kan uppstå redan vid korta rörelsen av robotar eller då en robot har navigerat en tid och kommer till en plats som den har redan varit i förr, detta kallas för loopstängning (Loop Closure). 

För autonomisk navigering behöver en robot veta sitt läge i miljön \citep{geospatial}. Med hjälp av kameror, bildbearbetning och beräkning kan miljön kartläggas, i helhet eller delvis, och drönaren lokalisera sig själv, detta kallas också för visuell samtidig lokalisering och kartläggning (VSLAM). VSLAM inomhus kan delas i tre kategorier, som är kartlösa (mapless), kartbaserade (map-based) och kartbyggande (map-building) system. 

\section{Kartlösa system}

I system utan karta navigerar drönaren bara med hjälp av att observera tydliga egenskaper i miljön \citep{982903}. Dessa kan vara till exempel väggar, dörrar, möbler eller andra landmärken. De mest använda metoder inom kartlösa system är optisk flöde (Optical flow) och spårning av egenskaper (Feature tracking). 

\subsection{Optisk flöde}

Santos-Victor et. al har använt optisk flöde i en robot för att imitera bin \citep{341094}. De placerade två kameror på varsin sida av en robot och beräknade hastigheten från bilderna av båda kamerorna med att ta fem bilder som utjämnas med Gaussisk oskärpa och de två sista utjämnade bilder används för att räkna medeltalet av optiska flödesvektorer. Om flödesvektorerna var samma på båda sidorna så for roboten rakt framåt, annars så far den mot den sida vilkens hastighet är mindre. Metoden som Santos-Victor et al. använde för roboten fungerar bara om båda kamerorna är symmetriskt riktade från varandra när man tar i beaktande rörelseriktningen av roboten \citep{982903}. Denna teknik fungerar dåligt i texturlösa miljö och det går inte att byta rörelseriktningen. Fast än metoden som Santos-Victor et al. använde tog bara i beaktande horisontala flödesvektorer så har sedan detta användning av optiska flödesmetoder forskats mera och forskaren har fått drönaren att uppskatta avstånd, hålla sin altitud, undvika hinder, beräkna hastighet och landa på en plattform som rör på sig med hjälp av optisk flöde \citep{6564752}.

\subsection{Spårning av egenskaper}

Spårning av egenskaper (Feature tracking) används för att skaffa information om objekt, så som linjer, hörn och olika former som är invarianta \citep{geospatial}. Med hjälp av dessa egenskaper av objekten och deras relativa rörelse i sekventiella bilder kan man bestämma robotens position. Då drönaren navigerar i området, så kommer den troligtvis att se dessa objekt från olika perspektiv, som hjälper drönaren att navigera. EKF-SLAM och FastSLAM faller under denna kategorin \cite{8930783}. Latif och Saddik har gjort en experiment inomhus med en drönare där de använde VoSLAM (Visual Odometry SLAM) som delar upp bildbearbetningen och 3D kartbyggande i egen processor och uppdatering av kartan samt lokaliseringen i en annan processor \citep{8930783}.

\section{Kartbaserade system}

Med kartbaserade system har drönaren en färdig vetskap om miljön som kan vara i form av geometriska modeller, topologiska kartor eller förhållande mellan landmärken \citep{982903}. Idén är att då roboten navigerar prövar den hitta landmärken från bilder som är lika till de landmärken som roboten vet om. När den hittat dessa så kan roboten beräkna sin position i miljön med SLAM algoritmer. Med hjälp av karta kan drönaren planera sin rörelse i förhand och ta omvägar där det behövs \citep{geospatial}. 

Kartbaserad lokalisering med datorseende kan delas upp i fyra steg, som är skaffa sensorinformation, upptäck landmärken från informationen med bildbearbetning, sammanlägga observationerna med förväntan och beräkna position \citep{982903}. Det svåraste steget av dessa är att sammanlägga observationerna med förväntan, på grund av att man kan inte veta med full säkerhet robotens position och då är det svårt att sammanlägga landmärken från rätt synvinkel samt vara säker att den landmärken man observerat är exakt den som man tror den vara, det vill säga data förenings problemet.

Då kartan finns kan man fokusera på lokalisering av roboten \citep{982903}. I global lokalisering måste man lita på att man kan förena observationerna med informationen man har och ta i beaktande osäkerheten med att någon av observationerna kan matcha flera av de landmärken man vet om. Detta problem kan lösas till exempel med Monte Carlo lokalisation som i korthet fungerar så att en robot antar med lika sannolikhet sin position i kartan och när den rör på sig så observerar den ny information och kan beräkna sannolikheten att hur de som den observerar matchar den karta som den har \citep{772544}.

I inkrementell lokalisering måste lokaliseringsalgoritmen hålla koll på osäkerheten av robotens position då den rör på sig och vänder \citep{772544}. Då osäkerhet av sin position är för stor stannar roboten och beräknar sin position med hjälp av visuell information av bilderna, alltså minskar på osäkerheten.

\section{Kartbyggande system}

Kartbyggande system kan användas då det är svårt att navigera med en existerande karta om omgivningen eller om kartan inte finns, som i katastrofområden \citep{geospatial}. Roboten kan vara medveten eller omedveten om sin position vid början av kartbyggande \citep{globalsubmaps}. Kartbyggande systems bildbearbetning kan delas tre kategorier, som är indirekt, direkt och hybrid metoder, som sammanslår indirekta och direkta metoder \citep{geospatial}.

\subsection{Indirekta metoder}

I bildbearbetning där används indirekta metoder tar man kännetecken ur bilden som är invariant för rotation, synvinkeländringar och rörelseoskärpa, dessa ges som indata som sedan kan användas för rörelseuppfattning och lokalisering \citep{geospatial}. Ett sätt att konstruera en karta är att beakta robotens rörelse och synvinkel \citep{globalsubmaps}. Se, Lowe och Little har gjort dessa samt användt indirekta metoder i sin artikel \citetitle{mapbuildingsift} för att bygga en 3D karta \citep{mapbuildingsift}. De tar bilder från stereokameror, utjämnar bilderna och använder SIFT (Scale-Invariant Feature Transform) algoritm för att extrahera egenskaper ur bilderna. Med denna metod har de kunnat konstruera en 3D karta av omgivningen baserat på landmärken utan att spara korrelationmatrix mellan landmärken som minskar häftigt på behov av beräkning. Denna approach har ändå problem då det kommer till loopstägning och uppdatering av kartan \citep{globalsubmaps}. Med att använda samma spårning av egenskaper, kartlägga delar av områden och senare bygga en stor global karta fick forskarna loopstängning och kart uppdateringen löst i begränsad miljö. I korthet kartlägger de, enligt robotens synvinkel, delar av kartan och från kartorna bredvid varandra kunde de identifiera landmärken och foga ihop kartorna till en stor karta. Indirekta metoder fungerar inte så bra i strukturlösa miljön, för det finns inte egenskaper att extrahera ur bilder \citep{geospatial}.

\subsection{Direkta metoder}

I direkta metoder används geometriska egenskaper och intensitets information av bilder \citep{geospatial}. Med hjälp av dessa så kan man hitta täta korrespondenser och konstruera en karta. 

\chapter{Sammafattning}

\iffalse
Mäst är inomhus av drönaren
Problem med beräkning, pga batteri kapacitet och komplexa algoritmer och bildbearbetningsalgoritmer
6DoF globalsubmaps
\fi

